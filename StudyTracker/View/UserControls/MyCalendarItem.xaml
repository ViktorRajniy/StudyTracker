<UserControl x:Class="StudyTracker.View.UserControls.MyCalendarItem"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:StudyTracker.View.UserControls"
			 xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
			 xmlns:vms="clr-namespace:StudyTracker.ViewModel.ViewModels" 
			 d:DataContext="{d:DesignInstance Type=vms:MyCalendarItemViewModel}"
             mc:Ignorable="d" 
             d:DesignHeight="90" d:DesignWidth="120"
			 MinHeight="90" MinWidth="160"
			 MaxHeight="200" MaxWidth="300"
			 Height="auto">

	<Border CornerRadius="10 0 10 0" BorderBrush="LightGray" BorderThickness="2">
		<Grid x:Name="MainGrid" Height="auto">

			<!--Grid props-->
			<Grid.RowDefinitions>
				<RowDefinition Height="*"/>
				<RowDefinition Height="auto"/>
			</Grid.RowDefinitions>

			<ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Hidden">
				<StackPanel>

					<!--Date text-->
					<StackPanel Orientation="Horizontal">
						<TextBlock x:Name="DayTextBlock" Margin="5 3" FontSize="16" Text="{Binding DateData.Date.Day}"/>
						<TextBlock x:Name="MonthTextBlock" Margin="5 3" FontSize="16" Text="{Binding Month}"/>
					</StackPanel>

					<ListBox x:Name="ExercisesListBox" ItemsSource="{Binding DateData.ExerciseList}" Background="Transparent">
						
						<!--Trigger of double click-->
						<i:Interaction.Triggers>
							<i:EventTrigger EventName="MouseDoubleClick">
								<i:InvokeCommandAction Command="{Binding EditExercise}" CommandParameter="{Binding ElementName=ExercisesListBox, Path=SelectedItem}"/>
							</i:EventTrigger>
						</i:Interaction.Triggers>

						<!--ListBox container style-->
						<ListBox.ItemContainerStyle>
							<Style TargetType="ListBoxItem">
								<Setter Property="HorizontalContentAlignment" Value="Stretch"/>
								<Setter Property="VerticalContentAlignment" Value="Stretch"/>
							</Style>
						</ListBox.ItemContainerStyle>

						<!--Item template-->
						<ListBox.ItemTemplate>
							<DataTemplate>
								<Border Background="Transparent" CornerRadius="6" BorderBrush="LightGray" BorderThickness="1">
									<StackPanel>
										<TextBlock TextWrapping="Wrap" Margin="3" Name="TitleText" FontSize="16" Text="{Binding Path=Title}"/>
									</StackPanel>
								</Border>
							</DataTemplate>
						</ListBox.ItemTemplate>

					</ListBox>
				</StackPanel>
			</ScrollViewer>

			<!--Button-->
			<Button Grid.Row="1" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="5" Command="{Binding AddExercise}" Content="+"/>
		</Grid>
	</Border>
</UserControl>
